{% extends 'base.html' %}
{% load static %}

{% block title %} Tables {% endblock %}


{% block css %}
<!-- Custom styles for this page -->
<link href="{% static 'vendor/datatables/dataTables.bootstrap4.min.css' %}" rel="stylesheet">
{% endblock %}

{% block container_fluid %}
<div class="container-fluid">
    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">Babies Forcast</h1>
    <p class="mb-4">대구광역시 10개년 신생아 수 예측</p>
    <!-- DataTales Example -->
    <div class="card shadow mb-4">
        <!-- <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">DataTables Example</h6>
        </div> -->
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>출생년도</th>
                            <th>입학년도</th>
                            <th>ARIMA</th>
                            <th>SSM</th>
                            <th>DLDA</th>
                            <th>CRU</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for db in results %}
                            <tr>
                                <td>{{ db.출생년도 }}</td>
                                <td>{{ db.입학년도 }}</td>
                                <td>{{ db.ARIMA }}</td>
                                <td>{{ db.SSM }}</td>
                                <td>{{ db.DLDA }}</td>
                                <td>{{ db.CRU }}</td>
                            </tr>
                        {% endfor %}                      
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="15">
                                <div class="chart-area">
                                    <script>
                                        window.onload = function () {
                                        
                                        var chart = new CanvasJS.Chart("chartContainer", {
                                            animationEnabled: true,
                                            title:{
                                                text: "대구광역시 10개년 신생아 수 예측"
                                            },
                                            axisX: {
                                                valueFormatString: "YYYY년"
                                            },
                                            axisY: {
                                                title: "예측값",
                                                suffix: " 명"
                                            },
                                            legend: {
                                                cursor: "pointer",
                                                itemclick: toggleDataSeries
                                            },
                                            toolTip:{
                                                shared: true
                                            },
                                            data: [{
                                                name: "ARIMA",
                                                type: "spline",
                                                yValueFormatString: "#0.## 명",
                                                showInLegend: true,
                                                dataPoints: [
                                                    { x: new Date(2014,00,00), y: 18688.0 }, 
                                                    { x: new Date(2015,00,00), y: 18738.5 },
                                                    { x: new Date(2016,00,00), y: 18284.5 },
                                                    { x: new Date(2017,00,00), y: 16601.0 },
                                                    { x: new Date(2018,00,00), y: 14717.5 },
                                                    { x: new Date(2019,00,00), y: 13444.5 },
                                                    { x: new Date(2020,00,00), y: 11915.5 },
                                                    { x: new Date(2021,00,00), y: 10671.5 },
                                                    { x: new Date(2022,00,00), y: 9632.4 },
                                                    { x: new Date(2023,00,00), y: 9539 },
                                                    { x: new Date(2024,00,00), y: 8978 },
                                                    { x: new Date(2025,00,00), y: 8417 },
                                                    { x: new Date(2026,00,00), y: 7856 },
                                                    { x: new Date(2027,00,00), y: 7295 },
                                                    { x: new Date(2028,00,00), y: 6734 },
                                                    { x: new Date(2029,00,00), y: 6173 },
                                                    { x: new Date(2030,00,00), y: 5612 },
                                                    { x: new Date(2031,00,00), y: 5051 },
                                                    { x: new Date(2032,00,00), y: 4490 },
                                                    { x: new Date(2033,00,00), y: 3929 },
                                                    { x: new Date(2034,00,00), y: 3530 },
                                                    { x: new Date(2035,00,00), y: 3017 }
                                                ]
                                            },
                                            {
                                                name: "SSM",
                                                type: "spline",
                                                yValueFormatString: "#0.## 명",
                                                showInLegend: true,
                                                dataPoints: [
                                                    { x: new Date(2014,00,00), y: 18688.0 }, 
                                                    { x: new Date(2015,00,00), y: 18738.5 },
                                                    { x: new Date(2016,00,00), y: 18284.5 },
                                                    { x: new Date(2017,00,00), y: 16601.0 },
                                                    { x: new Date(2018,00,00), y: 14717.5 },
                                                    { x: new Date(2019,00,00), y: 13444.5 },
                                                    { x: new Date(2020,00,00), y: 11915.5 },
                                                    { x: new Date(2021,00,00), y: 10671.5 },
                                                    { x: new Date(2022,00,00), y: 10187.84 },
                                                    { x: new Date(2023,00,00), y: 9978 },
                                                    { x: new Date(2024,00,00), y: 9414 },
                                                    { x: new Date(2025,00,00), y: 9156 },
                                                    { x: new Date(2026,00,00), y: 8895 },
                                                    { x: new Date(2027,00,00), y: 8534 },
                                                    { x: new Date(2028,00,00), y: 8173 },
                                                    { x: new Date(2029,00,00), y: 7861 },
                                                    { x: new Date(2030,00,00), y: 7651 },
                                                    { x: new Date(2031,00,00), y: 7490 },
                                                    { x: new Date(2032,00,00), y: 7230 },
                                                    { x: new Date(2033,00,00), y: 7099 },
                                                    { x: new Date(2034,00,00), y: 6868 },
                                                    { x: new Date(2035,00,00), y: 6607 }
                                                ]
                                            },
                                            {
                                                name: "DLDA",
                                                type: "spline",
                                                yValueFormatString: "#0.## 명",
                                                showInLegend: true,
                                                dataPoints: [
                                                    { x: new Date(2014,00,00), y: 18688.0 }, 
                                                    { x: new Date(2015,00,00), y: 18738.5 },
                                                    { x: new Date(2016,00,00), y: 18284.5 },
                                                    { x: new Date(2017,00,00), y: 16601.0 },
                                                    { x: new Date(2018,00,00), y: 14717.5 },
                                                    { x: new Date(2019,00,00), y: 13444.5 },
                                                    { x: new Date(2020,00,00), y: 11915.5 },
                                                    { x: new Date(2021,00,00), y: 10671.5 },
                                                    { x: new Date(2022,00,00), y: 9198.291 },
                                                    { x: new Date(2023,00,00), y: 8037.506 },
                                                    { x: new Date(2024,00,00), y: 7078.614 },
                                                    // { x: new Date(2025,00,00), y: 0 },
                                                    // { x: new Date(2026,00,00), y: 0 },
                                                    // { x: new Date(2027,00,00), y: 0 },
                                                    // { x: new Date(2028,00,00), y: 0 },
                                                    // { x: new Date(2029,00,00), y: 0 },
                                                    // { x: new Date(2030,00,00), y: 0 },
                                                    // { x: new Date(2031,00,00), y: 0 },
                                                    // { x: new Date(2032,00,00), y: 0 },
                                                    // { x: new Date(2033,00,00), y: 0 },
                                                    // { x: new Date(2034,00,00), y: 0 },
                                                    // { x: new Date(2035,00,00), y: 0 }
                                                ]
                                            },
                                            {
                                                name: "CRU",
                                                type: "spline",
                                                yValueFormatString: "#0.## 명",
                                                showInLegend: true,
                                                dataPoints: [
                                                    // { x: new Date(2014,00,00), y: 0 }, 
                                                    // { x: new Date(2015,00,00), y: 0 },
                                                    // { x: new Date(2016,00,00), y: 0 },
                                                    // { x: new Date(2017,00,00), y: 0 },
                                                    // { x: new Date(2018,00,00), y: 0 },
                                                    // { x: new Date(2019,00,00), y: 0 },
                                                    // { x: new Date(2020,00,00), y: 0 },
                                                    // { x: new Date(2021,00,00), y: 0 },
                                                    // { x: new Date(2022,00,00), y: 0 },
                                                    { x: new Date(2023,00,00), y: 9921 },
                                                    { x: new Date(2024,00,00), y: 9317 },
                                                    { x: new Date(2025,00,00), y: 8886 },
                                                    { x: new Date(2026,00,00), y: 8152 },
                                                    { x: new Date(2027,00,00), y: 7698 },
                                                    { x: new Date(2028,00,00), y: 7138 },
                                                    { x: new Date(2029,00,00), y: 6701 },
                                                    { x: new Date(2030,00,00), y: 6433 },
                                                    { x: new Date(2031,00,00), y: 6182 },
                                                    { x: new Date(2032,00,00), y: 5587 },
                                                    { x: new Date(2033,00,00), y: 5001 },
                                                    { x: new Date(2034,00,00), y: 4401 },
                                                    { x: new Date(2035,00,00), y: 4082 }
                                                ]
                                            },]
                                        });
                                        chart.render();
                                        
                                        function toggleDataSeries(e) {
                                            if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                                                e.dataSeries.visible = false;
                                            } else {
                                                e.dataSeries.visible = true;
                                            }
                                            e.chart.render();
                                        }
                                        }
                                        </script>
                                        </head>
                                        <body>
                                            <div id="chartContainer" style="height: 370px; width: 100%;"></div>
                                            <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
                                        </body>
                                </div>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js_body %}
<!-- Data Tables -->
<script src="{% static 'vendor/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'js/demo/datatables-demo.js' %}"></script>
{% endblock %}